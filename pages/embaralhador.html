<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../estilos/style.css">
    <link rel="stylesheet" href="../estilos/style_emb.css">
    <link href="https://emoji-css.afeld.me/emoji.css" rel="stylesheet">
    <title>Embaralhador</title>
</head>
<body>
    <div class="container" id="container">
        <div class="title">
            <i class="em em-joystick" aria-role="presentation" aria-label=""></i>
            <h1>Embaralhador de nomes</h1>
            <i class="em em-joystick" aria-role="presentation" aria-label=""></i>
        </div>

        <div class="textA">
            <textarea name="emb" id="emb" placeholder="Um nome em cada linha... " ></textarea>
        </div>

        <div class="quant">
            <p>Selecione a quantidade de nomes que deseja sortear:</p> 
            <input type="number" name="inp-num" id="inp-num" placeholder="0">
        </div>

        <div class="but-embaralhar">
            <input id="but-emb" type="button" value="Embaralhar Itens" onclick="embaralhar()">
        </div>

    </div>
    
    <script>
        
        var lista_de_quem_foi_sorteado = [];
        
        function embaralhar(){
            var qntd_num = window.document.getElementById("inp-num").value;
            var text_area = window.document.getElementById("emb").value;
            
            var lista_sorteio_da_vez = new Array; // Array vazio
            i = 0;
            
            var lista_geral = text_area.split("\n"); // Array criado por enters
            console.log("Array dividido por ENTER: "+lista_geral)
            
            while ( i < qntd_num){
                var nome_sorteado = (lista_geral[Math.floor(Math.random() * lista_geral.length)]); // Sortea um nome aleatório da lista
                console.log("Nome sorteado: "+nome_sorteado)
                if(lista_de_quem_foi_sorteado.indexOf(nome_sorteado) === -1){ //verifica se o nome sorteado não está na lista de quem foi sorteado
                    lista_sorteio_da_vez.push(nome_sorteado); // se não estiver, adiciona o nome na lista
                    console.log("Lista sorteio da vez: "+lista_sorteio_da_vez)
                    lista_de_quem_foi_sorteado.push(nome_sorteado); // adiciona o nome na lista de quem já foi sorteado
                    console.log("lista de quem já foi sorteado: "+lista_de_quem_foi_sorteado)
                    i++; // contador
                }
            }
            confirm(`Grupo:  ${'\n' + lista_sorteio_da_vez}`); // mostra os nomes sorteados no confirm
            //console.log(lista_sorteio_da_vez)
        }

    </script>

    
    <footer>
        <h5><i>MaiaTech Solutions</i></h5>
    </footer>
</body>
</html>