<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../estilos/style_sor.css">
    <link href="https://emoji-css.afeld.me/emoji.css" rel="stylesheet">
    <title>Sorteador</title>
</head>
<body>
    <div class="container" id="container">
        <div class="title">
            <i class="em em-joystick" aria-role="presentation" aria-label=""></i>
            <h1>Sorteador de times</h1>
            <i class="em em-joystick" aria-role="presentation" aria-label=""></i>
        </div>

        <div class="inputs-txt">
            <div>
                <label for="max-num">Digite a quantidade de times: </label><input type="number" name="max_num" id="times">
            </div>
            <div>
                <label for="min-num">Digite a quantidade de jogadores por time: </label><input type="number" name="min_num" id="jogadores">
            </div>
            
        </div>

        <div class="but-embaralhar">
            <input id="but-emb" type="button" value="Sortear!" onclick="sorteio()">
        </div>

        <div class="sort-num">
            <p>O número sorteado dentro da listagem acima é:</p> 
            <input type="text" name="result" id="result" value="" readonly >
        </div>

    </div>
    <footer>
        <h5><i>MaiaTech Solutions</i></h5>
    </footer>

    <script>
        let numeros_sorteados = [];
        
        function sorteio(){
            let array_geral = [];
            let jogadores_por_time = document.getElementById("jogadores").value;
            let quantidade_de_time = document.getElementById("times").value;
            let array_sort = [];

            for(i=1;i<=jogadores_por_time;i++){
                for(cont=1; cont <= quantidade_de_time;cont++){
                    array_geral.push(cont)    
                }
            }
            
            
            jogadores_por_time = Math.ceil(jogadores_por_time);
            quantidade_de_time = Math.floor(quantidade_de_time);
            console.log("Array time: "+array_geral)
    
            let sort = (array_geral[Math.floor(Math.random() * array_geral.length)]); // sorteio pelo indice
            console.log("Índice sorteado aleatórico: "+ sort)
            document.getElementById("result").value=sort;           
            
            
            if (numeros_sorteados.indexOf(sort) === -1){
                numeros_sorteados.push(sort)
                console.log("Numeros já chamados: "+numeros_sorteados)
                let indice_localizado = array_geral.indexOf(sort); // localiza o indice do numero sorteado na lista geral e salva na variável criada
            }
            let indice_localizado = array_geral.indexOf(sort); // localiza o 
            if(indice_localizado > -1){
                array_geral.splice(indice_localizado,1)
                console.log("Lista sem os já chamados: "+array_geral)
            }
        }
    </script>
</body>
</html>